<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QR表示ページ</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: sans-serif;
      color: #666;
    }
    img {
      max-width: 90%;
      max-height: 90%;
    }
    .blocked {
      font-size: 18px;
    }
  </style>
</head>
<body>

<script>
  const KEY = "already_used";

  // すでに使用済みなら即ブロック
  if (localStorage.getItem(KEY)) {
    document.body.innerHTML =
      '<div class="blocked">このページはもう開けません</div>';
  } else {
    // 初回アクセス扱い
    localStorage.setItem(KEY, "true");

    const img = document.createElement("img");
    img.src = "image.jpg";
    document.body.appendChild(img);

    let count = 1;

    const interval = setInterval(() => {
      count++;

      // 同じ画像を強制的に再読み込みして「再表示」させる
      img.src = "image.jpg?time=" + Date.now();

      if (count >= 3) {
        clearInterval(interval);
      }
    }, 500); // 1秒ごとに表示（変更可）
  }
</script>

</body>
</html>
