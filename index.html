<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QR表示ページ</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: sans-serif;
      color: #666;
    }
    img {
      max-width: 90%;
      max-height: 90%;
    }
    .blocked {
      font-size: 18px;
    }
  </style>
</head>
<body>

<script>
  const KEY = "already_used";
  const IMAGE = "IMG_3362.jpeg";

  // すでに使用済みならブロック
  if (localStorage.getItem(KEY)) {
    document.body.innerHTML =
      '<div class="blocked">このページはもう開けません</div>';
  } else {
    // 初回アクセス
    localStorage.setItem(KEY, "true");

    const img = document.createElement("img");
    img.src = IMAGE;
    document.body.appendChild(img);

    let count = 1;

    const interval = setInterval(() => {
      count++;

      // 強制再読み込みして再表示
      img.src = IMAGE + "?t=" + Date.now();

      if (count >= 3) {
        clearInterval(interval);
      }
    }, 1000); // 表示間隔（ms）
  }
</script>

</body>
</html>
